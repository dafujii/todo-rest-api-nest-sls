service: todo-rest-api-nest-sls

plugins:
  - serverless-layers
  - serverless-offline

provider:
  name: aws
  runtime: nodejs12.x
  region: ap-northeast-1
  memorySize: 256
  logRetentionInDays: 1
  apiGateway:
    minimumCompressionSize: 1024
  environment:
    AWS_NODEJS_CONNECTION_REUSE_ENABLED: 1
    LANG: ja_JP.UTF-8
    AUTH_SECRET: ${ssm:/dafujii/todo-rest-api-nest-sls/AUTH_SECRET}
  versionFunctions: false
  deploymentBucket:
    name: dafujii-serverless-deploymentbucket
  vpc:
    securityGroupIds:
      - sg-0f3a6eacc4e1351b5
    subnetIds:
      - subnet-070c26f9888b68668
      - subnet-0fd6a08fcce7cd6d2

package:
  individually: true
  include:
    - dist/**
  exclude:
    - "**"
functions:
  index:
    handler: dist/handler.handler
    events:
      - http:
          cors: true
          path: "/"
          method: any
      - http:
          cors: true
          path: "{proxy+}"
          method: any
